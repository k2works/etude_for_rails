machine:
  ruby:
    version: 2.4.0
  node:
    version: 7.4.0
  post:
    - npm install -g npm@3
  timezone: Asia/Tokyo

test:
  pre:
    - bin/yarn
    - bin/webpack
    - bin/rails assets:precompile
  override:
    - bin/rspec
    - bin/rails test
    - npm test
    - bin/rails test:system

deployment:
  staging:
    branch: development
    heroku:
      appname: etude-for-rails
  production:
    branch: master
    heroku:
      appname: etude-for-rails